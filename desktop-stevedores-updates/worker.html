{% extends "base.html" %}

{% block title %}Worker Dashboard{% endblock %}

{% block content %}
<div style="padding: 20px 0;">
    <h1>âš“ Worker Dashboard</h1>
    <p>Welcome, {{ current_user.username }}!</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
            <h3>ðŸ“‹ My Tasks</h3>
            <p>Pending: {{ pending_tasks|length if pending_tasks else 0 }}</p>
            <p>In Progress: {{ in_progress_tasks|length if in_progress_tasks else 0 }}</p>
            <p>Completed: {{ completed_tasks|length if completed_tasks else 0 }}</p>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
            <h3>ðŸš¢ My Vessel</h3>
            <p>Vessel: {{ vessel.name if vessel else 'Not assigned' }}</p>
            <p>Vessel Tasks: {{ vessel_tasks|length if vessel_tasks else 0 }}</p>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
            <h3>ðŸ”„ Sync Status</h3>
            <p>Last Sync: {{ current_user.last_sync.strftime('%Y-%m-%d %H:%M') if current_user.last_sync else 'Never' }}</p>
            <p>Status: {{ 'Online' if sync_stats else 'Offline Ready' }}</p>
        </div>
    </div>
    
    <div style="margin-top: 40px;">
        <h3>ðŸŽ‰ Fleet Management System is Working!</h3>
        <p>Your offline-ready PWA is operational and ready for ship use.</p>
        <div style="margin-top: 20px;">
            <a href="{{ url_for('auth.logout') }}" class="btn">Logout</a>
        </div>
    </div>
</div>
{% endblock %}